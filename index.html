<html>
  <head>
    <title>Pull file page</title>
  </head>
  <body>
    <button onclick="downFn()" id="downloadBtn">
      Download
    </button>
  </body>
  <script>
    function downFn(url) {
      const pattern = /^(ftp|http|https):\/\/[^ "]+$/;
      if (!pattern.test(url)) {
        errMsg.textContent = "Wrong URL Entered";
        dBtn.innerText = "Download File";
        return;
      }
      errMsg.textContent = "";
      fetch(url)
      .then((res) => {
        if (!res.ok) {
          throw new Error("Network Problem");
        }
        return res.blob();
      })
      .then((file) => {
        const ex = extFn(url);
        let tUrl = URL.createObjectURL(file);
        const tmp1 = document.createElement("a");
        tmp1.href = tUrl;
        tmp1.download = `downloaded_file.${ex}`;
        document.body.appendChild(tmp1);
        tmp1.click();
        dBtn.innerText = "Download File";
        URL.revokeObjectURL(tUrl);
        tmp1.remove();
      })
      .catch(() => {
        errMsg.textContent =
        "Cannot Download Restricted Content!";
        dBtn.innerText = "Download File";
      });
    }

  </script>
</html>
